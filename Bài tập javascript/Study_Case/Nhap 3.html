<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<style>

body{
    background-image: url("https://blogger.googleusercontent.com/img/a/AVvXsEghFtzDs4gA-XJxZApsn4Nkl50RI5UXx4m2-WceVAVmBCfep3eJKKhh8MO8TRMsODssq8FyC5B3yDzBgfmtcOVqEC7uVYcUI1j3YVrr5HzY4YBm2RZ6dTKLDVQ_jZfF1h6tvWw9G0lpQrmSf0TFlMZ-X-ouVwqA6-TwNIn7jx06aimUls68G3OH4Z1r=w1200-h630-p-k-no-nu");
}

#div1{
    font-size: 20px;
    margin-left: 50px;
    color: lightcoral;
}
#div2{
    font-size: 20px;
    margin-right: 50px;
    color: lightcoral;
    font-weight: bold;
}
    .button {
        padding: 15px 32px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        margin: 0 auto;
        cursor: pointer;
        font-size: 15px;
        background-color: white;
        color: lightcoral;
        border-radius: 50px;
        font-weight: bold;
    }
    #answer {
        padding: 10px 25px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        margin: 0 auto;
        cursor: pointer;
        font-size: 15px;
        background-color: white;
        color: lightcoral;
    }

    #ul {
        list-style: none;
    }

    #nghiamo {
        display: none
    }
    #correcta {
        display: none;
    }
</style>
<body>
<div id="div1" style="float: left;">
    <p><b>開始するためにここに押してください。</b></p>
    <p><a id="clicks"><b>0</b></a><b> 個目</b></p>
    <button type="button"  class="button" id="start" onclick="go(); showNext(); hideStart()">開始</button>
    <button type="button" class="button" id="next" onclick="go()" hidden="">次へ</button>
    <p id="hiragana"></p>
    <ul id="ul">
        <li class="word" id="word1"></li>
        <li class="word" id="word2"></li>
        <li class="word" id="word3"></li>
        <li class="word" id="word4"></li>
    </ul>    <br><br>
    <h3 id="styleTime">
        残りの時間:<span id="timeCountDown"></span>
    </h3>
    <audio src="./bgm.mp3" controls autoplay></audio>
</div>
<div id="div2" style="float: right;">
    <p>正解と思う答えの番号をここに入力ください。 </p>
    <input type="number" id="answer">
    <br><br><br><br>
    <button class="button" id="meaning" onclick="confirm()">ヒント</button>
    <button type="button" class="button" id="check" onclick="count(); onClick()">答え確認</button>
    <p id="correcta"></p>
    <p id="result"></p>
    <p id="total1"></p>
    <p id="total2"></p>
    <br>  <br>  <br>
    <d id="nghia"></d>
    <d id="nghiamo"></d>
</div>
<script>
    console.log(innerWidth)
    console.log(innerHeight)
    let question = document.getElementById("hiragana");
    let a1 = document.getElementById("word1");
    let a2 = document.getElementById("word2");
    let a3 = document.getElementById("word3");
    let a4 = document.getElementById("word4");
    let dapandung = document.getElementById("correcta")
    let answer = document.getElementById("answer");
    let result = document.getElementById("result");
    let countDung = 0;
    let countSai = 0;

    //to transcribe phonetically
    function go() {
        let phienam = [
            "本は本でもお店で買えない本ってなに？",
            "ひみつが大好きな仕事ってどんな仕事？",
            "上がることはあっても、決して下がることがないものって何？",
            "みんなから「とっても賢いね」と言われる楽器ってなに？",
            "数字の９が嫌いな動物ってなに？",
            "ひっくり返えると、軽くなる動物って何？",
            "口から出てくる「くび」って何？",
            "丸じゃなくて、四角いボールってなに？",
            "学校の中でどんどん歳を取る場所ってどこ？",
            "愛（あい）の下には何がある？",
            "表だけのカードでやることって何？",
            "どんなにかきたくても足じゃないとかけないものってなに？",
            "勝負に３回勝って、雄叫びを上げている魚ってなに？",
            "陸上競技場にいつもある車って、どんな車？",
            "いつも消防車に乗ってる動物ってなに？",
            "オーストラリアの中央にいる動物は？",
            "１日に２回あるのに、１年に１回しかないものってなに？",
            "島の中に６匹の動物がいます。なんの動物でしょう？",
            "閉じると見えなくなって、開けると見えるようになるものって何？",
            "カタカナ２文字が大喧嘩しました。何と何でしょう？",
            "世界の真ん中にいる虫は何？",
        ]
        let tuvung = [
            "見本",
            "書く仕事（隠しごと）",
            "年齢",
            "リコーダー（利口だ）",
            "スカンク（好かん９）",
            "イルカ（逆から読むと「カルイ」）",
            "あくび",
            "段ボール",
            "廊下（老化）",
            "う（あい「う」えお）",
            "占い（裏ない）",
            "あぐら",
            "サンショウウオ（三勝・魚）",
            "トラック",
            "馬（馬は英語でホースですよね）",
            "トラ（オース「トラ」リア）",
            "ち（いちにち・いちねん）",
            "シロクマ（シマの中にロクで、シロクマ）",
            "目（または瞼）",
            "バとル（バトル）",
            "蚊（せ「か」い）",
        ]
        let nghia = [
            "嫌だな！自分で考えなさいよ。",
            "嫌だな！自分で考えなさいよ。",
            "嫌だな！自分で考えなさいよ。",
            "嫌だな！自分で考えなさいよ。",
            "嫌だな！自分で考えなさいよ。",
            "嫌だな！自分で考えなさいよ。",
            "嫌だな！自分で考えなさいよ。",
            "嫌だな！自分で考えなさいよ。",
            "嫌だな！自分で考えなさいよ。",
            "嫌だな！自分で考えなさいよ。",
            "嫌だな！自分で考えなさいよ。",
            "嫌だな！自分で考えなさいよ。",
            "嫌だな！自分で考えなさいよ。",
            "嫌だな！自分で考えなさいよ。",
            "嫌だな！自分で考えなさいよ。",
            "嫌だな！自分で考えなさいよ。",
            "嫌だな！自分で考えなさいよ。",
            "嫌だな！自分で考えなさいよ。",
            "嫌だな！自分で考えなさいよ。",
            "嫌だな！自分で考えなさいよ。",
            "嫌だな！自分で考えなさいよ。",
            "嫌だな！自分で考えなさいよ。",
            "嫌だな！自分で考えなさいよ。",
        ]
        let indexqa = Math.floor(Math.random() * phienam.length);
        question.innerHTML = phienam[indexqa];
        let answer1 = tuvung[indexqa];
        arr = [1, 2, 3, 4];
        let num = Math.floor(Math.random() * arr.length);
        dapandung.innerHTML = arr[num];// In ra dùng để đối chiếu kết quả vì không truy xuất được trực tiếp arr[num] trong hàm check
        document.getElementById("nghiamo").innerHTML = nghia[indexqa];
        console.log(nghia[indexqa])
        switch (arr[num]) {
            case 1:
                a1.innerHTML = "1. " + answer1;
                break;
            case 2:
                a2.innerHTML = "2. " + answer1;
                break;
            case 3:
                a3.innerHTML = "3. " + answer1;
                break;
            case 4:
                a4.innerHTML = "4. " + answer1;
                break;
        }
        tuvung.splice(indexqa, 1);
        arr.splice(num, 1);
        let indexAnswer2 = Math.floor(Math.random() * tuvung.length);
        let answer2 = tuvung[indexAnswer2];
        let num2 = Math.floor(Math.random() * arr.length);
        switch (arr[num2]) {
            case 1:
                a1.innerHTML = "1. " + answer2;
                break;
            case 2:
                a2.innerHTML = "2. " + answer2;
                break;
            case 3:
                a3.innerHTML = "3. " + answer2;
                break;
            case 4:
                a4.innerHTML = "4. " + answer2;
                break;
        }
        tuvung.splice(indexAnswer2, 1);
        arr.splice(num2, 1);
        let indexAnswer3 = Math.floor(Math.random() * tuvung.length);
        let num3 = Math.floor(Math.random() * arr.length);
        let answer3 = tuvung[indexAnswer3];
        switch (arr[num3]) {
            case 1:
                a1.innerHTML = "1. " + answer3;
                break;
            case 2:
                a2.innerHTML = "2. " + answer3;
                break;
            case 3:
                a3.innerHTML = "3. " + answer3;
                break;
            case 4:
                a4.innerHTML = "4. " + answer3;
                break;
        }
        tuvung.splice(indexAnswer3, 1);
        arr.splice(num3, 1)
        let indexAnswer4 = Math.floor(Math.random() * tuvung.length);
        let num4 = Math.floor(Math.random() * arr.length)
        let answer4 = tuvung[indexAnswer4];
        switch (arr[num4]) {
            case 1:
                a1.innerHTML = "1. " + answer4;
                break;
            case 2:
                a2.innerHTML = "2. " + answer4;
                break;
            case 3:
                a3.innerHTML = "3. " + answer4;
                break;
            case 4:
                a4.innerHTML = "4. " + answer4;
                break;
        }
        answer.value = "";
    }

    function checkResult() {
        let text = Number(dapandung.innerHTML);// Là câu trả lời đúng

        let input = Number(answer.value);// Là câu trả lời nhập vào
        let kq1 = a1.innerHTML;
        let kq2 = a2.innerHTML;
        let kq3 = a3.innerHTML;
        let kq4 = a4.innerHTML;
        let kq;
        if (input === "") {
            document.getElementById("result").innerHTML = "答えはまだ入力されていません. 開始ボタンを押してください."
        }else if(input<0 && input>4){
            document.getElementById("result").innerHTML = "1~4の中から一つ選んでください."
        }else {
            if (text === input) {
                result.innerHTML = "正解!"
                return true;
            } else {
                switch (text) {
                    case 1:
                        kq = kq1
                        break;
                    case 2:
                        kq = kq2;
                        break;
                    case 3:
                        kq = kq3;
                        break;
                    case 4:
                        kq = kq4;
                        break;
                }
                document.getElementById("result").innerHTML = "不正解. 正解答えは: " + kq;
                return false;
            }
        }
    }

    function confirm() {
        document.getElementById('nghia').innerHTML = nghiamo.innerHTML
    }

    let clicks = 0;

    function onClick() {
        clicks += 1;
        document.getElementById("clicks").innerHTML = "<b>" + clicks + "<b>";
        if (clicks === 20) {
            result.innerHTML = "全てのなぞなぞを解きました。";
        }
    };


    function count() {
        if (checkResult()) {
            countDung++;
            return;
        } else if (checkResult == false) {
            countSai++;
        } else {
            return "";
        }
        document.getElementById("total1").innerHTML = "正解個数: " + countDung;
        document.getElementById("total2").innerHTML = "不正解個数: " + countSai;
        console.log(countSai)
    }

    //hàm hiện nút Next
    function showNext() {
        document.getElementById("next").removeAttribute("hidden");
    }
    function hideStart() {
        document.getElementById("start").setAttribute("hidden", "");
    }


    let timeCount;
    let message;

    let timeID = setInterval(function () {
        document.getElementById('timeCountDown').innerHTML = timeCount + " 秒 ";
        timeCount--;
        countdown();
    }, 1000);


    function countdown() {
        let styles = document.getElementById('styleTime');
        let styleTime = document.getElementById('timeCountDown');
        if (timeCount < 0) {
            clearInterval(timeID);
            message = window.alert('Time Out!');
            reload();
        }
        if (timeCount < 5){
            styles.style.color = 'red';
            styleTime.style.color = 'red';
        }

    }
</script>
</body>
</html>